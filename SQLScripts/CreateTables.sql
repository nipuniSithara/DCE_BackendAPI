CREATE DATABASE DCE_DB;

USE DCE_DB
GO;

CREATE TABLE Customer (
    UserId UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    Username NVARCHAR(30) NOT NULL,
    Email NVARCHAR(20) NOT NULL,
    FirstName NVARCHAR(20) NOT NULL,
    LastName NVARCHAR(20) NULL,
    CreatedOn DATETIME DEFAULT GETDATE(),
    IsActive BIT DEFAULT 1
);

CREATE TABLE Supplier (
    SupplierId UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    SupplierName NVARCHAR(50) NOT NULL,
    CreatedOn DATETIME DEFAULT GETDATE(),
    IsActive BIT DEFAULT 1
);

CREATE TABLE Product (
    ProductId UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    ProductName NVARCHAR(50) NOT NULL,
    UnitPrice DECIMAL(18, 2) NOT NULL,
    SupplierId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES Supplier(SupplierId) NOT NULL,
    CreatedOn DATETIME DEFAULT GETDATE(),
    IsActive BIT DEFAULT 1
);

CREATE TABLE [Order] (
    OrderId UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    ProductId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES Product(ProductId) NOT NULL,
    OrderStatus INT NULL,
    OrderType INT NULL,
    OrderBy UNIQUEIDENTIFIER FOREIGN KEY REFERENCES Customer(UserId) NOT NULL,
    OrderedOn DATETIME NULL,
    ShippedOn DATETIME NULL,
    IsActive BIT DEFAULT 0
);

--INSERT TO TABLES
INSERT INTO Customer(UserId,Username,Email,FirstName,LastName,CreatedOn,IsActive)
VALUES ('92FE2219-890A-4535-8F3C-93664691E23D','HarryPotter','hpotter@gmail.com','Harry','Potter','2024-05-11 10:17:26.870',1),
('BCB944E8-4FD9-45CD-9ACC-5614CCA41235','RWeasley','rweasley@gmail.com','Ron','Weasley','2024-05-10 10:17:26.870',1);

INSERT INTO Supplier(SupplierId,SupplierId,IsActive,CreatedOn)
VALUES ('A3923B6B-B9D1-4AFB-8302-02DACDDA6A4B', 'ABC Supliers',1,'2024-05-10 10:17:26.870'),
('1BADCC3F-54B6-4FB2-9B46-A91155094216','XYZ Suppliers',1,'2024-05-11 10:17:26.870');

INSERT INTO Product(ProductId,ProductName,UnitPrice,SupplierId,CreatedOn,IsActive)
VALUES ('A52AC180-A6F1-44E8-8B93-18AF252FE73D','iphone 11 128GB Mint Green',120000,'A3923B6B-B9D1-4AFB-8302-02DACDDA6A4B','2024-05-11 10:17:26.870',1),
('1330CB51-EA67-4C1D-A61F-3D77D36AA590','iphone 11 128GB Midnight',120000,'A3923B6B-B9D1-4AFB-8302-02DACDDA6A4B','2024-05-11 10:17:26.870',1),
('F314AD55-332D-483B-B9B9-7CE22C4F8CE2','iphone 11 128GB Red',120000,'1BADCC3F-54B6-4FB2-9B46-A91155094216','2024-05-11 10:17:26.870',0);

INSERT INTO [Order](ProductId,OrderStatus,OrderType,OrderBy,OrderedOn,ShippedOn,IsActive)
VALUES ('A52AC180-A6F1-44E8-8B93-18AF252FE73D',3,1,'92FE2219-890A-4535-8F3C-93664691E23D','2024-05-11 13:31:08.910','2024-05-12 13:31:08.910',0),
('1330CB51-EA67-4C1D-A61F-3D77D36AA590',1,1,'92FE2219-890A-4535-8F3C-93664691E23D','2024-05-11 13:31:08.910',NULL,1),
('A52AC180-A6F1-44E8-8B93-18AF252FE73D',2,2,'BCB944E8-4FD9-45CD-9ACC-5614CCA41235','2024-05-12 13:31:08.910',NULL,1);

